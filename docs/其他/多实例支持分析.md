# å¤šå®ä¾‹æ”¯æŒï¼šéœ€æ±‚åˆ†æä¸æŠ€æœ¯æ–¹æ¡ˆ

*æ–‡æ¡£åˆ›å»ºï¼š2025å¹´9æœˆ30æ—¥*

## ğŸ¯ éœ€æ±‚åˆ†æ

### æ ¸å¿ƒéœ€æ±‚
> åœ¨åŒä¸€é¡¹ç›®ä¸­åˆ›å»ºå¤šä¸ªLLMå®ä¾‹ï¼Œä¸åŒå®ä¾‹ä½¿ç”¨ä¸åŒçš„æ¨¡å‹é…ç½®ï¼Œé€‚ç”¨äºä¸åŒçš„ä¸šåŠ¡åœºæ™¯

### å…¸å‹ä½¿ç”¨åœºæ™¯

#### 1. **æˆæœ¬ä¼˜åŒ–åœºæ™¯** â­â­â­â­â­
```typescript
// æ€»ç»“ä»»åŠ¡ä½¿ç”¨ä¾¿å®œæ¨¡å‹
const summaryClient = useLlmClient({ 
  defaultConfig: { provider: 'openai', model: 'gpt-4o-mini' }
});

// å¤æ‚å¯¹è¯ä½¿ç”¨é«˜è´¨é‡æ¨¡å‹  
const chatClient = useLlmClient({
  defaultConfig: { provider: 'openai', model: 'gpt-4-turbo' }
});
```
**ä¸šåŠ¡ä»·å€¼**ï¼šæ˜¾è‘—é™ä½APIæˆæœ¬ï¼ŒåŒæ—¶ä¿è¯æ ¸å¿ƒåŠŸèƒ½è´¨é‡

#### 2. **åŠŸèƒ½ä¸“ä¸šåŒ–åœºæ™¯** â­â­â­â­
```typescript
// ç¿»è¯‘ä¸“ç”¨å®ä¾‹
const translatorClient = useLlmClient({
  defaultConfig: { 
    provider: 'anthropic', 
    model: 'claude-3-5-sonnet',
    systemMessage: 'ä½ æ˜¯ä¸“ä¸šç¿»è¯‘åŠ©æ‰‹'
  }
});

// ä»£ç ç”Ÿæˆä¸“ç”¨å®ä¾‹
const codeGenClient = useLlmClient({
  defaultConfig: {
    provider: 'openai',
    model: 'gpt-4-turbo',
    systemMessage: 'ä½ æ˜¯ä»£ç ç”Ÿæˆä¸“å®¶'
  }
});
```
**ä¸šåŠ¡ä»·å€¼**ï¼šé’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œæé«˜ç‰¹å®šä»»åŠ¡çš„æ‰§è¡Œæ•ˆæœ

#### 3. **æ€§èƒ½åˆ†å±‚åœºæ™¯** â­â­â­â­
```typescript
// å¿«é€Ÿå“åº” - æœ¬åœ°æ¨¡å‹
const quickClient = useLlmClient({
  defaultConfig: { provider: 'webllm', model: 'Qwen2-1.5B' }
});

// å¤æ‚ä»»åŠ¡ - äº‘ç«¯æ¨¡å‹
const powerfulClient = useLlmClient({
  defaultConfig: { provider: 'openai', model: 'gpt-4-turbo' }
});
```
**ä¸šåŠ¡ä»·å€¼**ï¼šå¹³è¡¡å“åº”é€Ÿåº¦å’Œå¤„ç†èƒ½åŠ›

#### 4. **å®¹ç¾å¤‡ä»½åœºæ™¯** â­â­â­
```typescript
// ä¸»è¦æœåŠ¡
const primaryClient = useLlmClient({
  defaultConfig: { provider: 'openai', model: 'gpt-4' }
});

// å¤‡ç”¨æœåŠ¡  
const backupClient = useLlmClient({
  defaultConfig: { provider: 'anthropic', model: 'claude-3-5-sonnet' }
});
```
**ä¸šåŠ¡ä»·å€¼**ï¼šæé«˜æœåŠ¡å¯ç”¨æ€§

## ğŸ—ï¸ æŠ€æœ¯å¯è¡Œæ€§åˆ†æ

### å½“å‰æ¶æ„ä¼˜åŠ¿ âœ…

#### 1. **Provideræ¶æ„å¤©ç„¶æ”¯æŒå¤šå®ä¾‹**
```typescript
// å½“å‰æ¶æ„å·²å®Œå…¨æ”¯æŒ
const provider1 = new OpenaiProvider({ model: 'gpt-4o-mini' });
const provider2 = new OpenaiProvider({ model: 'gpt-4-turbo' });

const client1 = createLlmClient(provider1);
const client2 = createLlmClient(provider2);
```

#### 2. **çŠ¶æ€éš”ç¦»æœºåˆ¶å®Œå–„**
- æ¯ä¸ª `LlmConnectorProvider` éƒ½æœ‰ç‹¬ç«‹çš„çŠ¶æ€
- é…ç½®å­˜å‚¨ä½¿ç”¨ä¸åŒçš„ localStorage key
- æ— çŠ¶æ€å†²çªé£é™©

#### 3. **Contextç³»ç»Ÿæ”¯æŒåµŒå¥—**
```tsx
<LlmConnectorProvider storageKey="summary-config">
  <SummaryComponent />
  <LlmConnectorProvider storageKey="chat-config">
    <ChatComponent />
  </LlmConnectorProvider>
</LlmConnectorProvider>
```

### æŠ€æœ¯æŒ‘æˆ˜åˆ†æ âš ï¸

#### 1. **å­˜å‚¨é”®å†²çª** - ä¸­ç­‰é£é™©
**é—®é¢˜**ï¼šå¤šå®ä¾‹ä½¿ç”¨ç›¸åŒlocalStorageé”®ä¼šç›¸äº’è¦†ç›–
**è§£å†³æ–¹æ¡ˆ**ï¼šä¸ºæ¯ä¸ªå®ä¾‹æä¾›ç‹¬ç«‹çš„storageKey

#### 2. **UIç»„ä»¶å†²çª** - ä½é£é™©  
**é—®é¢˜**ï¼šå¤šä¸ªè¿æ¥è¡¨å•å¯èƒ½é€ æˆæ··æ·†
**è§£å†³æ–¹æ¡ˆ**ï¼šé€šè¿‡å‘½åå’Œè§†è§‰åŒºåˆ†ä¸åŒå®ä¾‹

#### 3. **æ€§èƒ½å¼€é”€** - ä½é£é™©
**é—®é¢˜**ï¼šå¤šä¸ªProvideråŒæ—¶åŠ è½½å¯èƒ½å½±å“æ€§èƒ½
**è§£å†³æ–¹æ¡ˆ**ï¼šæ‡’åŠ è½½å’Œèµ„æºå…±äº«æœºåˆ¶

## ğŸ› ï¸ å®ç°æ–¹æ¡ˆè®¾è®¡

### æ–¹æ¡ˆAï¼šå¤šProviderå¹¶è¡Œ â­â­â­â­â­
**é€‚ç”¨åœºæ™¯**ï¼šä¸éœ€è¦UIé…ç½®çš„ç¨‹åºåŒ–ä½¿ç”¨

```typescript
import { createLlmClient, OpenaiProvider, AnthropicProvider } from 'llm-connector';

// åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„Client
class LlmOrchestrator {
  private summaryClient: LlmClient;
  private chatClient: LlmClient;
  
  constructor() {
    // æ€»ç»“ä¸“ç”¨ - ä¾¿å®œæ¨¡å‹
    const summaryProvider = new OpenaiProvider({
      mode: 'direct',
      apiKey: process.env.OPENAI_API_KEY,
      model: 'gpt-4o-mini',
    });
    
    // å¯¹è¯ä¸“ç”¨ - é«˜è´¨é‡æ¨¡å‹
    const chatProvider = new AnthropicProvider({
      mode: 'direct', 
      apiKey: process.env.ANTHROPIC_API_KEY,
      model: 'claude-3-5-sonnet-20241022',
    });
    
    this.summaryClient = createLlmClient(summaryProvider);
    this.chatClient = createLlmClient(chatProvider);
  }
  
  async summarize(text: string) {
    return await this.summaryClient.chat({
      messages: [{ role: 'user', content: `è¯·æ€»ç»“ï¼š${text}` }]
    });
  }
  
  async chat(messages: ChatMessage[]) {
    return await this.chatClient.chat({ messages });
  }
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… å®Œå…¨ç¨‹åºåŒ–æ§åˆ¶
- âœ… æ€§èƒ½æœ€ä¼˜
- âœ… é…ç½®çµæ´»

**åŠ£åŠ¿**ï¼š
- âŒ æ— UIé…ç½®æ”¯æŒ
- âŒ éœ€è¦ç¡¬ç¼–ç é…ç½®

### æ–¹æ¡ˆBï¼šå¤šContextåˆ†ç¦» â­â­â­â­
**é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦ç‹¬ç«‹UIé…ç½®çš„ä¸åŒåŠŸèƒ½æ¨¡å—

```tsx
// App.tsx
function App() {
  return (
    <div className="app">
      {/* æ€»ç»“åŠŸèƒ½åŒºåŸŸ */}
      <LlmConnectorProvider storageKey="summary-llm-config">
        <div className="summary-section">
          <h2>æ–‡æ¡£æ€»ç»“ (ç»æµæ¨¡å¼)</h2>
          <ConnectionFormZh />
          <SummaryInterface />
        </div>
      </LlmConnectorProvider>
      
      {/* å¯¹è¯åŠŸèƒ½åŒºåŸŸ */}
      <LlmConnectorProvider storageKey="chat-llm-config">  
        <div className="chat-section">
          <h2>æ™ºèƒ½å¯¹è¯ (é«˜è´¨é‡æ¨¡å¼)</h2>
          <ConnectionFormZh />
          <ChatInterface />
        </div>
      </LlmConnectorProvider>
    </div>
  );
}

// SummaryInterface.tsx
const SummaryInterface = () => {
  const { llmClient } = useLlmConnector(); // ä½¿ç”¨summaryé…ç½®çš„client
  
  const handleSummarize = async (text: string) => {
    if (!llmClient) return;
    
    const result = await llmClient.chat({
      messages: [{ role: 'user', content: `è¯·æ€»ç»“ï¼š${text}` }]
    });
    
    return result.text;
  };
  
  return (
    <div>
      {/* æ€»ç»“ç•Œé¢ */}
    </div>
  );
};

// ChatInterface.tsx  
const ChatInterface = () => {
  const { llmClient } = useLlmConnector(); // ä½¿ç”¨chaté…ç½®çš„client
  
  return (
    <div>
      {/* å¯¹è¯ç•Œé¢ */}
    </div>
  );
};
```

**ä¼˜åŠ¿**ï¼š
- âœ… å®Œæ•´çš„UIæ”¯æŒ
- âœ… ç‹¬ç«‹é…ç½®ç®¡ç†
- âœ… ç”¨æˆ·å‹å¥½

**åŠ£åŠ¿**ï¼š
- âŒ UIç©ºé—´å ç”¨è¾ƒå¤§
- âŒ é…ç½®é‡å¤æ€§å·¥ä½œ

### æ–¹æ¡ˆCï¼šæ™ºèƒ½é…ç½®åˆ‡æ¢å™¨ â­â­â­
**é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦åœ¨å¤šä¸ªé…ç½®é—´å¿«é€Ÿåˆ‡æ¢

```tsx
// MultiInstanceManager.tsx
const MultiInstanceManager = () => {
  const [activeProfile, setActiveProfile] = useState<'summary' | 'chat' | 'translate'>('summary');
  
  const profiles = {
    summary: { storageKey: 'summary-config', name: 'æ€»ç»“æ¨¡å¼' },
    chat: { storageKey: 'chat-config', name: 'å¯¹è¯æ¨¡å¼' },  
    translate: { storageKey: 'translate-config', name: 'ç¿»è¯‘æ¨¡å¼' }
  };
  
  return (
    <div>
      {/* é…ç½®åˆ‡æ¢å™¨ */}
      <div className="profile-switcher">
        {Object.entries(profiles).map(([key, profile]) => (
          <button 
            key={key}
            onClick={() => setActiveProfile(key as any)}
            className={activeProfile === key ? 'active' : ''}
          >
            {profile.name}
          </button>
        ))}
      </div>
      
      {/* åŠ¨æ€Provider */}
      <LlmConnectorProvider 
        key={activeProfile} 
        storageKey={profiles[activeProfile].storageKey}
      >
        <ConnectionFormZh />
        <TaskInterface taskType={activeProfile} />
      </LlmConnectorProvider>
    </div>
  );
};
```

**ä¼˜åŠ¿**ï¼š
- âœ… èŠ‚çœUIç©ºé—´
- âœ… é…ç½®åˆ‡æ¢ä¾¿æ·
- âœ… é€‚åˆç›¸ä¼¼ä»»åŠ¡

**åŠ£åŠ¿**ï¼š
- âŒ ä¸èƒ½åŒæ—¶ä½¿ç”¨å¤šä¸ªå®ä¾‹
- âŒ é…ç½®åˆ‡æ¢æœ‰å»¶è¿Ÿ

## ğŸ¯ æ¨èå®æ–½è·¯å¾„

### é˜¶æ®µ1ï¼šæ–‡æ¡£åŒ–å½“å‰èƒ½åŠ› ğŸ“‹
**ç›®æ ‡**ï¼šè®©å¼€å‘è€…çŸ¥é“å¤šå®ä¾‹å·²ç»å¯ç”¨
- æ›´æ–°READMEï¼Œæ·»åŠ å¤šå®ä¾‹ä½¿ç”¨ç¤ºä¾‹
- åˆ›å»ºæœ€ä½³å®è·µæŒ‡å—
- æä¾›ä»£ç ç¤ºä¾‹å’Œæ¨¡æ¿

### é˜¶æ®µ2ï¼šAPIä¼˜åŒ– ğŸ”„
**ç›®æ ‡**ï¼šè®©å¤šå®ä¾‹ä½¿ç”¨æ›´ç®€å•
```typescript
// ç†æƒ³çš„APIè®¾è®¡
const { 
  summaryClient,
  chatClient, 
  translateClient 
} = useMultiLlmClients({
  summary: { provider: 'openai', model: 'gpt-4o-mini' },
  chat: { provider: 'anthropic', model: 'claude-3-5-sonnet' },
  translate: { provider: 'gemini', model: 'gemini-1.5-pro' }
});
```

### é˜¶æ®µ3ï¼šUIç»„ä»¶å¢å¼º ğŸ“‹
**ç›®æ ‡**ï¼šæä¾›ä¸“é—¨çš„å¤šå®ä¾‹UIç»„ä»¶
```tsx
<MultiInstanceConnector
  instances={{
    summary: { name: 'æ€»ç»“åŠ©æ‰‹', defaultModel: 'gpt-4o-mini' },
    chat: { name: 'å¯¹è¯åŠ©æ‰‹', defaultModel: 'claude-3-5-sonnet' }
  }}
  onReady={(clients) => {
    // clients.summary, clients.chat
  }}
/>
```

## ğŸ“Š å¼€å‘ä¼˜å…ˆçº§è¯„ä¼°

| æ–¹æ¡ˆ | å¼€å‘å·¥ä½œé‡ | ç”¨æˆ·ä»·å€¼ | æŠ€æœ¯å¤æ‚åº¦ | æ¨èæŒ‡æ•° |
|------|------------|----------|------------|----------|
| æ–¹æ¡ˆA - å¤šProvider | 0å¤© | â­â­â­â­ | ä½ | â­â­â­â­â­ |
| æ–¹æ¡ˆB - å¤šContext | 0.5å¤© | â­â­â­â­â­ | ä½ | â­â­â­â­â­ |
| æ–¹æ¡ˆC - é…ç½®åˆ‡æ¢å™¨ | 2å¤© | â­â­â­ | ä¸­ | â­â­â­ |
| APIä¼˜åŒ– | 3å¤© | â­â­â­â­â­ | ä¸­ | â­â­â­â­ |
| UIç»„ä»¶å¢å¼º | 5å¤© | â­â­â­â­ | é«˜ | â­â­â­ |

## ğŸ’¡ ç«‹å³å¯è¡Œçš„ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šæˆæœ¬ä¼˜åŒ–çš„AIå†™ä½œå·¥å…·
```tsx
function AIWritingTool() {
  return (
    <div className="writing-tool">
      {/* è‰ç¨¿ç”Ÿæˆ - ä½¿ç”¨ä¾¿å®œæ¨¡å‹ */}
      <LlmConnectorProvider storageKey="draft-config">
        <div className="draft-section">
          <h3>è‰ç¨¿ç”Ÿæˆ (GPT-4o-mini)</h3>
          <ConnectionFormZh />
          <DraftGenerator />
        </div>
      </LlmConnectorProvider>
      
      {/* å†…å®¹ä¼˜åŒ– - ä½¿ç”¨é«˜è´¨é‡æ¨¡å‹ */}
      <LlmConnectorProvider storageKey="polish-config">
        <div className="polish-section">
          <h3>å†…å®¹ä¼˜åŒ– (Claude-3.5-Sonnet)</h3>
          <ConnectionFormZh />
          <ContentPolisher />
        </div>
      </LlmConnectorProvider>
    </div>
  );
}
```

### ç¤ºä¾‹2ï¼šå¤šè¯­è¨€æ”¯æŒåº”ç”¨
```tsx
function MultiLingualApp() {
  // ç¿»è¯‘æœåŠ¡ - Gemini (å¤šè¯­è¨€èƒ½åŠ›å¼º)
  const translationProvider = new GeminiProvider({
    mode: 'direct',
    apiKey: GEMINI_API_KEY,
    model: 'gemini-1.5-pro',
    systemMessage: 'ä½ æ˜¯ä¸“ä¸šçš„å¤šè¯­è¨€ç¿»è¯‘åŠ©æ‰‹'
  });
  
  // å¯¹è¯æœåŠ¡ - OpenAI (å¯¹è¯èƒ½åŠ›å¼º)
  const chatProvider = new OpenaiProvider({
    mode: 'direct', 
    apiKey: OPENAI_API_KEY,
    model: 'gpt-4-turbo',
    systemMessage: 'ä½ æ˜¯å‹å¥½çš„AIåŠ©æ‰‹'
  });
  
  const translationClient = createLlmClient(translationProvider);
  const chatClient = createLlmClient(chatProvider);
  
  return (
    <div>
      <TranslationInterface client={translationClient} />
      <ChatInterface client={chatClient} />
    </div>
  );
}
```

## ğŸ¯ ç»“è®ºä¸å»ºè®®

### æ ¸å¿ƒå‘ç° âš ï¸ **æŠ€æœ¯è¯„ä¼°æ›´æ­£**
1. **å¤šå®ä¾‹æ”¯æŒéœ€è¦ä¿®å¤** - Providerç¼ºå°‘å¿…è¦å‚æ•°
2. **Contextæœºåˆ¶å®Œå…¨å¯é ** - ReactæŸ¥æ‰¾é€»è¾‘æ— é—®é¢˜  
3. **å­˜å‚¨å†²çªé—®é¢˜** - ç¡¬ç¼–ç localStorageé”®å¯¼è‡´å®ä¾‹å†²çª
4. **æ¶æ„è®¾è®¡åˆç†** - ä¿®å¤å‚æ•°åå³å¯å®Œå…¨å¯ç”¨

### ç«‹å³è¡ŒåŠ¨å»ºè®® ğŸš€
1. **ä¿®å¤Providerå‚æ•°** - æ·»åŠ  `name` å’Œ `storageKey` æ”¯æŒ
2. **æ›´æ–°Hookå®ç°** - æ”¯æŒåŠ¨æ€localStorageé”®
3. **æ›´æ­£é¡¹ç›®çŠ¶æ€** - å¤šå®ä¾‹æ”¯æŒçŠ¶æ€ï¼šéœ€è¦ä¿®å¤ 40%
4. **åˆ›å»ºä¿®å¤æ–¹æ¡ˆ** - è¯¦ç»†çš„æŠ€æœ¯å®ç°è®¡åˆ’

### æŠ€æœ¯å€ºåŠ¡ ï¿½
- **P0ä¿®å¤**ï¼šProviderå‚æ•°æ”¯æŒï¼ˆå¿…é¡»ï¼‰
- **P0ä¿®å¤**ï¼šHookåŠ¨æ€å­˜å‚¨æ”¯æŒï¼ˆå¿…é¡»ï¼‰
- **P1å¢å¼º**ï¼šå®ä¾‹åç§°æ˜¾ç¤ºï¼ˆå¯é€‰ï¼‰
- **P2ä¼˜åŒ–**ï¼šå¼€å‘è€…å·¥å…·é›†æˆï¼ˆå¯é€‰ï¼‰

---

**é‡è¦æ›´æ­£**ï¼šå¤šå®ä¾‹æ”¯æŒå­˜åœ¨æŠ€æœ¯ç¼ºé™·ï¼Œéœ€è¦ä¼˜å…ˆä¿®å¤åŸºç¡€å‚æ•°æ”¯æŒã€‚è¯¦ç»†åˆ†æè¯·å‚è§ï¼š[Contextæœ€è¿‘ä¸Šçº§æœºåˆ¶å¯é æ€§åˆ†æ.md](Contextæœ€è¿‘ä¸Šçº§æœºåˆ¶å¯é æ€§åˆ†æ.md)